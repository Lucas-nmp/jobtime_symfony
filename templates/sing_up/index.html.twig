{% extends 'base.html.twig' %}

{% block title %}Modificar Usuario{% endblock %}

{% block body %}
<h2 class="card-title mb-4 text-center">Añadir Fichaje Manualmente</h2>
<div class="d-flex justify-content-center align-items-center" style="min-height: 30vh;">
    <div class="card p-4" style="max-width: 600px; width: 100%;">
        

        <!-- Mostrar mensajes flash -->
        {% for label, messages in app.flashes %}
            <div class="alert alert-{{ label }}">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endfor %}

        <div class="mb-3">
            <label for="userSelect" class="form-label">Seleccione un Usuario</label>
            <select id="userSelect" class="form-select" onchange="loadUserData(this.value)">
                <option value="">-- Seleccione un Usuario --</option>
                {% for user in users %}
                    <option value="{{ user.id }}">{{ user.id }} - {{ user.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Selectores de Fecha -->
        <div class="row mb-3">
            <div class="col">
                <label for="yearSelect" class="form-label">Año</label>
                <select id="yearSelect" class="form-select">
                    <option value="">Seleccione año</option>
                </select>
            </div>
            <div class="col">
                <label for="monthSelect" class="form-label">Mes</label>
                <select id="monthSelect" class="form-select" onchange="updateDays()">
                    <option value="">Seleccione mes</option>
                    <option value="1">Enero</option>
                    <option value="2">Febrero</option>
                    <option value="3">Marzo</option>
                    <option value="4">Abril</option>
                    <option value="5">Mayo</option>
                    <option value="6">Junio</option>
                    <option value="7">Julio</option>
                    <option value="8">Agosto</option>
                    <option value="9">Septiembre</option>
                    <option value="10">Octubre</option>
                    <option value="11">Noviembre</option>
                    <option value="12">Diciembre</option>
                </select>
            </div>
            <div class="col">
                <label for="daySelect" class="form-label">Día</label>
                <select id="daySelect" class="form-select">
                    <option value="">Seleccione día</option>
                </select>
            </div>
        </div>


    </div>
</div>

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/dateSelectors.js') }}"></script>
    <script>
        // Llamada a las funciones para llenar los selectores al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            populateYearSelector();
        });

        
    </script>
{% endblock %}

{% endblock %}
